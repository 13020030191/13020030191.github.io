{"version":3,"sources":["redux/actions/index.js","redux/actions/userInfo/index.js","webpack:///./src/pages/User/Login.less?4e7b","pages/User/Login.less","pages/User/Login.js"],"names":["__webpack_exports__","setUserInfo","data","saveUserInfo","type","Types","SET_USER_INFO","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","main","icon","other","register","UserName","Password","Submit","LoginPage","connect","_ref","userInfo","dispatch","actions","props","_this","Object","_Users_yzf_Desktop_github_pc_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__","this","_Users_yzf_Desktop_github_pc_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__","_Users_yzf_Desktop_github_pc_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__","call","changeAutoLogin","e","setState","autoLogin","target","checked","renderMessage","react__WEBPACK_IMPORTED_MODULE_13___default","a","createElement","antd_es_alert__WEBPACK_IMPORTED_MODULE_5__","style","marginBottom","message","showIcon","onTabChange","onGetCaptcha","Promise","resolve","reject","loginForm","validateFields","err","values","handleSubmit","state","username","password","submitting","setTimeout","notice","mobile","handleRegister","antd_es_message__WEBPACK_IMPORTED_MODULE_3__","warning","_this2","_this$state","rulesOption","required","pattern","className","styles","ant_design_pro_lib_Login__WEBPACK_IMPORTED_MODULE_12___default","defaultActiveKey","onSubmit","ref","name","autoComplete","placeholder","rules","onPressEnter","antd_es_checkbox__WEBPACK_IMPORTED_MODULE_1__","onChange","onClick","float","loading","Component"],"mappings":"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","file":"static/js/16.5b81e5f0.chunk.js","sourcesContent":["import { setUserInfo } from './userInfo'\n\nexport default {\n  setUserInfo\n}\n","import Types from '../../constants'\nimport { saveUserInfo } from '../../../utils/catche'\n\nexport function setUserInfo (data) {\n  saveUserInfo(data)\n  return {\n    type: Types.SET_USER_INFO,\n    data\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-7-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-7-3!./Login.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-7-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-7-3!./Login.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-7-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-7-3!./Login.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\\n/* stylelint-disable no-duplicate-selectors */\\n/* stylelint-disable */\\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\\n.Login__main__1F5GY {\\n  width: 368px;\\n  margin: 0 auto;\\n}\\n@media screen and (max-width: 576px) {\\n  .Login__main__1F5GY {\\n    width: 95%;\\n  }\\n}\\n.Login__main__1F5GY .Login__icon__86xRR {\\n  margin-left: 16px;\\n  font-size: 24px;\\n  color: rgba(0, 0, 0, 0.2);\\n  vertical-align: middle;\\n  cursor: pointer;\\n  -webkit-transition: color 0.3s;\\n  transition: color 0.3s;\\n}\\n.Login__main__1F5GY .Login__icon__86xRR:hover {\\n  color: #1890ff;\\n}\\n.Login__main__1F5GY .Login__other__1eS4J {\\n  margin-top: 24px;\\n  line-height: 22px;\\n  text-align: left;\\n}\\n.Login__main__1F5GY .Login__other__1eS4J .Login__register__ofKT2 {\\n  float: right;\\n  color: #1890ff;\\n}\\n\", \"\"]);\n\n// Exports\nexports.locals = {\n\t\"main\": \"Login__main__1F5GY\",\n\t\"icon\": \"Login__icon__86xRR\",\n\t\"other\": \"Login__other__1eS4J\",\n\t\"register\": \"Login__register__ofKT2\"\n};","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Checkbox, Alert, message } from 'antd'\nimport { Login } from 'ant-design-pro'\nimport actions from '../../redux/actions'\n\nimport styles from './Login.less'\n\nconst { UserName, Password, Submit } = Login\n\n@connect(\n  ({ userInfo }) => ({ userInfo }),\n  dispatch => ({\n    setUserInfo: data => dispatch(actions.setUserInfo(data))\n  })\n)\nclass LoginPage extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      type: 'account',\n      autoLogin: true,\n      notice: '',\n      submitting: false,\n    }\n  }\n\n  //自动登录\n  changeAutoLogin = (e) => {\n    this.setState({\n      autoLogin: e.target.checked,\n    })\n  }\n\n  //错误弹框\n  renderMessage = (content) => {\n    return <Alert\n      style={{ marginBottom: 24 }}\n      message={content}\n      type=\"error\"\n      showIcon/>\n  }\n\n  //tab切换\n  onTabChange = (type) => {\n    this.setState({\n      type: type,\n    })\n  }\n\n  //验证码回调\n  onGetCaptcha = () =>\n    new Promise((resolve, reject) => {\n      this.loginForm.validateFields(['mobile'], {}, (err, values) => {\n        if (err) {\n          reject(err)\n        } else {\n          console.log(values)\n        }\n      })\n    })\n\n  //登录\n  handleSubmit = (err, values) => {\n    const { setUserInfo } = this.props\n    if (this.state.type === 'account') {\n      if (!err &&\n        (values.username !== 'yzf' || values.password !== '...')) {\n        this.setState({\n          notice: '账户或密码错误（yzf/...）！',\n        })\n      } else if (!err) {\n        this.setState({\n          submitting: true,\n        })\n        setTimeout(() => {\n          setUserInfo(values.username)\n          console.log(values.username, values.password)\n        }, 1000)\n      }\n    } else {\n      if (!err) {\n        this.setState({\n          submitting: true,\n        })\n        setUserInfo(values.mobile)\n        console.log(values.mobile, values.captcha)\n      }\n    }\n  }\n  // 注册\n  handleRegister = () => {\n    message.warning('此功能还没做, 请勿点击!!!')\n  }\n\n  render () {\n    const { type, autoLogin, notice, submitting } = this.state\n    const rulesOption = {\n      username: [\n        {\n          required: true, message: '请输入账号！',\n        },\n      ],\n      password: [\n        {\n          required: true, message: '请输入密码！',\n        },\n      ],\n      mobile: [\n        {\n          required: true, message: '请输入手机号！',\n        },\n        {\n          pattern: /^1\\d{10}$/,\n          message: '手机号格式错误！',\n        },\n      ],\n    }\n    return (\n      <div className={styles.main}>\n        <Login\n          defaultActiveKey={type}\n          onTabChange={this.onTabChange}\n          onSubmit={this.handleSubmit}\n          ref={ref => {\n            this.loginForm = ref\n          }}\n        >\n          {\n            this.state.notice &&\n            this.renderMessage(notice)\n          }\n          <UserName name=\"username\" autoComplete=\"off\" placeholder=\"yzf\"\n                    rules={rulesOption.username}/>\n          <Password name=\"password\" autoComplete=\"off\" placeholder=\"...\"\n                    rules={rulesOption.password}\n                    onPressEnter={\n                      () => this.loginForm.validateFields(\n                        this.handleSubmit)\n                    }\n          />\n        \n          <div>\n            <Checkbox checked={autoLogin}\n                      onChange={this.changeAutoLogin}>自动登录</Checkbox>\n            <span className='link-button' onClick={this.handleRegister} style={{ float: 'right' }}>忘记密码</span>\n          </div>\n          <Submit loading={submitting}>登录</Submit>\n          <div className={styles.other}>\n            <div className={styles.register} onClick={this.handleRegister}>注册账户</div>\n            {/* <Link className={styles.register} to=\"/user/register\">\n              注册账户\n            </Link> */}\n          </div>\n        </Login>\n      </div>\n    )\n  }\n}\n\nexport default LoginPage\n"],"sourceRoot":""}